<!DOCTYPE html>
<html lang="en">
<head>
    <title>Simple Map</title>

    <!-- Foundation CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/css/foundation.min.css"
          rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500;600;700;800&display=swap"
          rel="stylesheet">
    <!-- Icons -->
    <link href="https://cdn.lineicons.com/2.0/LineIcons.css" rel="stylesheet">
    <!-- Project styling -->
    <link href="../town-emulation.css" rel="stylesheet" type="text/css">

    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5WUH1JJLPWlHDzYirhuDG_8qZ6fnkgAo&callback=initMap&libraries=&v=weekly"></script>
    <script>
        let map;

        function initMap() {
            let mapDiv = document.getElementById("map");

            map = new google.maps.Map(mapDiv, {
                center: {lat: 42.19460564372644, lng: -87.81816846557618},
                zoom: 14,
                disableDefaultUI: true,
            });

            map.addListener('click', function (event) {
                console.log(map.getCenter().toJSON());
                let url = "https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB5WUH1JJLPWlHDzYirhuDG_8qZ6fnkgAo";

                let center = map.getCenter().toJSON();
                url += "&center=" + center.lat + "," + center.lng;
                url += "&zoom=" + (map.getZoom() - 1);

                url += "&size=" + 4096 + "x" + 4096;
                url += "&scale=2";


                const styleNoLabels = "feature:all|element:labels|visibility:off"
                const styleAllWhite = "feature:all|color:0xffffff"
                const styleRoadsBlack = "feature:road|element:geometry|color:0x000000"
                const styleManMadeBlack = "feature:landscape.man_made|element:geometry|color:0x000000"
                const styleWaterBlack = "feature:water|element:geometry|color:0x000000"
                const styleSchoolsBlack = "feature:poi.school|element:geometry|color:0x000000"

                const labels = [
                    [styleNoLabels],
                    [styleNoLabels, styleAllWhite, styleManMadeBlack],
                    [styleNoLabels, styleAllWhite, styleRoadsBlack],
                    [styleNoLabels, styleAllWhite, styleWaterBlack],
                    [styleNoLabels, styleSchoolsBlack]
                ];

                for (let i = 0; i < labels.length; i++) {
                    let selectedUrl = url

                    let labelsPart = "";
                    labels[i].forEach(function (part) {
                        labelsPart += "&style=" + part;
                    })


                    //https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB5WUH1JJLPWlHDzYirhuDG_8qZ6fnkgAo&center=42.19460564372644,-87.81816846557618&zoom=13&size=4096x4096&scale=2&style=feature:all%257Celement:labels%257Cvisibility:off&style=feature:all%257Celement:labels%257Cvisibility:off
                    document.getElementById("static" + i).setAttribute("src", selectedUrl + encodeURI(labelsPart));
                }


                console.log(url);
                //let selectedUrl = "https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB5WUH1JJLPWlHDzYirhuDG_8qZ6fnkgAo&center=42.19460564372644,-87.81816846557618&zoom=13&size=4096x4096&scale=2"


            });


            //https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB5WUH1JJLPWlHDzYirhuDG_8qZ6fnkgAo&center=42.19460564372644,-87.81816846557618&zoom=13&size=4096x4096&scale=2
        }


    </script>
</head>
<body>

<div class="grid-container">
    <h2>Emulation Data</h2>
    <div id="map"></div>
    <img alt="0" class="static-img" id="static0" src=""/>
    <img alt="1" class="static-img" id="static1" src=""/>
    <img alt="2" class="static-img" id="static2" src=""/>
    <img alt="3" class="static-img" id="static3" src=""/>
    <img alt="4" class="static-img" id="static4" src=""/>
    <!--
        <div class="grid-x grid-padding-x">
            <div class="cell medium-2">
                left
            </div>
            <div class="cell medium-10">
            </div>
        </div>
    -->
</div>


<!-- jQuery -->
<script crossorigin="anonymous" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- Foundation JavaScript -->
<script crossorigin="anonymous"
        src="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/js/foundation.min.js"></script>

<!-- Project files -->
<script src="../map.js"></script>
</body>

</html>